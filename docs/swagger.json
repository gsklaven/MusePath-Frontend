"{\n  \"openapi\": \"3.0.3\",\n  \"info\": {\n    \"title\": \"Combined Museum Navigation API\",\n    \"version\": \"2\",\n    \"description\": \"Unified RESTful API for museum visitor navigation, map interaction, destination routing, and exhibit management.\"\n  },\n  \"servers\": [\n    {\n      \"url\": \"https://api.server.test/v1\"\n    }\n  ],\n  \"paths\": {\n    \"/coordinates/{user_id}\": {\n      \"get\": {\n        \"summary\": \"Get current user coordinates\",\n        \"parameters\": [\n          {\n            \"name\": \"user_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Current location retrieved successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Coordinate\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"User not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      },\n      \"put\": {\n        \"summary\": \"Update current user coordinates\",\n        \"parameters\": [\n          {\n            \"name\": \"user_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          }\n        ],\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/CoordinateUpdate\"\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Coordinates updated successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"type\": \"object\",\n                  \"properties\": {\n                    \"user_id\": {\n                      \"type\": \"integer\"\n                    },\n                    \"updated\": {\n                      \"type\": \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Invalid coordinates\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"User not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/destinations\": {\n      \"get\": {\n        \"summary\": \"List all destinations\",\n        \"parameters\": [\n          {\n            \"name\": \"map_id\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"List of destinations retrieved successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"$ref\": \"#/components/schemas/Destination\"\n                  }\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      },\n      \"post\": {\n        \"summary\": \"Upload destinations data\",\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/DestinationUpload\"\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Destinations uploaded successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"type\": \"object\",\n                  \"properties\": {\n                    \"destinationsId\": {\n                      \"type\": \"integer\"\n                    },\n                    \"destinationData\": {\n                      \"type\": \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Invalid destination data\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/destinations/{destination_id}\": {\n      \"get\": {\n        \"summary\": \"Get destination info, status, or alternative suggestions\",\n        \"parameters\": [\n          {\n            \"name\": \"destination_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          },\n          {\n            \"name\": \"currentTime\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"string\"\n            }\n          },\n          {\n            \"name\": \"includeStatus\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"boolean\"\n            }\n          },\n          {\n            \"name\": \"includeAlternatives\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"boolean\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Destination data retrieved successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/DestinationResponse\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Destination not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/downloads/exhibits/{exhibit_id}\": {\n      \"get\": {\n        \"summary\": \"Download exhibit information for offline use\",\n        \"description\": \"FR24. The user must be able to download exhibit information and maps.\",\n        \"operationId\": \"downloadExhibitInfo\",\n        \"parameters\": [\n          {\n            \"name\": \"exhibit_id\",\n            \"in\": \"path\",\n            \"description\": \"ID of the exhibit to download\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Exhibit data file\",\n            \"content\": {\n              \"application/zip\": {\n                \"schema\": {\n                  \"type\": \"string\",\n                  \"format\": \"binary\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Exhibit not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/downloads/maps/{map_id}\": {\n      \"get\": {\n        \"summary\": \"Download map file for offline use\",\n        \"description\": \"FR24. The user must be able to download exhibit information and maps.\",\n        \"operationId\": \"downloadMap\",\n        \"parameters\": [\n          {\n            \"name\": \"map_id\",\n            \"in\": \"path\",\n            \"description\": \"ID of the map to download\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Map image file\",\n            \"content\": {\n              \"image/png\": {\n                \"schema\": {\n                  \"type\": \"string\",\n                  \"format\": \"binary\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Map not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/exhibits/{exhibit_id}\": {\n      \"get\": {\n        \"summary\": \"View the information page of an exhibit\",\n        \"description\": \"FR14. The user must be able to view information about the exhibits.\\n\\nFR25. The user must be able to use basic map and pre-downloaded exhibit information in offline mode.\",\n        \"operationId\": \"viewInfo\",\n        \"parameters\": [\n          {\n            \"name\": \"exhibit_id\",\n            \"in\": \"path\",\n            \"description\": \"Id of the specific exhibit\",\n            \"required\": true,\n            \"style\": \"simple\",\n            \"explode\": false,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          },\n          {\n            \"name\": \"mode\",\n            \"in\": \"query\",\n            \"description\": \"Mode of access - online or offline\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"string\",\n              \"example\": \"online\",\n              \"enum\": [\n                \"online\",\n                \"offline\"\n              ]\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Exhibit information retrieved successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/inline_response_200\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/exhibits/{exhibit_id}/audio\": {\n      \"get\": {\n        \"summary\": \"Get audio guide for an exhibit\",\n        \"description\": \"FR15. The user must be able to listen to an audio transcript of an exhibit.\",\n        \"operationId\": \"getAudioGuide\",\n        \"parameters\": [\n          {\n            \"name\": \"exhibit_id\",\n            \"in\": \"path\",\n            \"description\": \"Id of the specific exhibit\",\n            \"required\": true,\n            \"style\": \"simple\",\n            \"explode\": false,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          },\n          {\n            \"name\": \"mode\",\n            \"in\": \"query\",\n            \"description\": \"Mode of access - online or offline\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"string\",\n              \"example\": \"online\",\n              \"enum\": [\n                \"online\",\n                \"offline\"\n              ]\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Audio guide retrieved successfully\",\n            \"content\": {\n              \"audio/mpeg\": {\n                \"schema\": {\n                  \"type\": \"string\",\n                  \"format\": \"binary\"\n                }\n              }\n            }\n          },\n          \"402\": {\n            \"description\": \"Audio guide not available offline\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Exhibit not found or no audio guide available\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/exhibits/{exhibit_id}/ratings\": {\n      \"post\": {\n        \"summary\": \"Rate an exhibit\",\n        \"description\": \"FR17. The user must be able to rate exhibits.\",\n        \"operationId\": \"rateExhibit\",\n        \"parameters\": [\n          {\n            \"name\": \"exhibit_id\",\n            \"in\": \"path\",\n            \"description\": \"Id of the specific exhibit\",\n            \"required\": true,\n            \"style\": \"simple\",\n            \"explode\": false,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          }\n        ],\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/exhibit_id_ratings_body\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"204\": {\n            \"description\": \"Exhibit rated successfully\"\n          },\n          \"400\": {\n            \"description\": \"Invalid rating value\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Exhibit not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/exhibits/search\": {\n      \"get\": {\n        \"summary\": \"Search for exhibits\",\n        \"description\": \"FR16.  The user must be able to search for exhibits by category or keyword.\",\n        \"operationId\": \"searchExhibits\",\n        \"parameters\": [\n          {\n            \"name\": \"exhibit_term\",\n            \"in\": \"query\",\n            \"description\": \"Keyword to search by exhibit title, artist, or description\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"string\"\n            }\n          },\n          {\n            \"name\": \"category\",\n            \"in\": \"query\",\n            \"description\": \"Filter exhibits by category\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"string\",\n              \"example\": \"category\"\n            }\n          },\n          {\n            \"name\": \"mode\",\n            \"in\": \"query\",\n            \"description\": \"Mode of access - online or offline\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"string\",\n              \"example\": \"online\",\n              \"enum\": [\n                \"online\",\n                \"offline\"\n              ]\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Exhibits matching the search criteria\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"type\": \"array\",\n                  \"items\": {\n                    \"$ref\": \"#/components/schemas/inline_response_200_1\"\n                  }\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"No exhibits found matching the search criteria\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/maps\": {\n      \"post\": {\n        \"summary\": \"Upload map\",\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/MapUpload\"\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Map uploaded successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"type\": \"object\",\n                  \"properties\": {\n                    \"map_id\": {\n                      \"type\": \"integer\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Invalid map data\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/maps/{map_id}\": {\n      \"get\": {\n        \"summary\": \"Get map data with offline-aware functionality\",\n        \"description\": \"FR25.The user must be able to use basic map and pre-downloaded exhibit information in offline mode.\",\n        \"operationId\": \"getMapById\",\n        \"parameters\": [\n          {\n            \"name\": \"map_id\",\n            \"in\": \"path\",\n            \"description\": \"ID of map\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          },\n          {\n            \"name\": \"zoom\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"number\"\n            }\n          },\n          {\n            \"name\": \"rotation\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"number\"\n            }\n          },\n          {\n            \"name\": \"mode\",\n            \"in\": \"query\",\n            \"description\": \"Mode of access - online or offline\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"string\",\n              \"example\": \"offline\",\n              \"enum\": [\n                \"online\",\n                \"offline\"\n              ]\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Map details with offline-aware URLs\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/MapWithOfflineStatus\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Map not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"503\": {\n            \"description\": \"Service unavailable (offline mode, no cached data)\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/notifications\": {\n      \"post\": {\n        \"summary\": \"Send user notification\",\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/NotificationRequest\"\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Notification sent successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Notification\"\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Invalid notification data\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"User or route not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/routes\": {\n      \"post\": {\n        \"summary\": \"Calculate route\",\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/RouteRequest\"\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Route calculated successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/RouteCalculation\"\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Invalid route parameters\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"User or destination not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/routes/{route_id}\": {\n      \"get\": {\n        \"summary\": \"Get route details or ETA\",\n        \"operationId\": \"getRouteDetails\",\n        \"parameters\": [\n          {\n            \"name\": \"route_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          },\n          {\n            \"name\": \"walkingSpeed\",\n            \"in\": \"query\",\n            \"required\": false,\n            \"schema\": {\n              \"type\": \"number\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Route details retrieved successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/RouteETA\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Route not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      },\n      \"put\": {\n        \"summary\": \"Update route stops\",\n        \"operationId\": \"updateRouteStops\",\n        \"parameters\": [\n          {\n            \"name\": \"route_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          }\n        ],\n        \"requestBody\": {\n          \"required\": true,\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/RouteUpdate\"\n              }\n            }\n          }\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Route updated successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"type\": \"object\",\n                  \"properties\": {\n                    \"route_id\": {\n                      \"type\": \"integer\"\n                    },\n                    \"stopsUpdated\": {\n                      \"type\": \"boolean\"\n                    },\n                    \"newEstimatedTime\": {\n                      \"type\": \"integer\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Invalid stop data\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"Route not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      },\n      \"post\": {\n        \"summary\": \"Recalculate existing route\",\n        \"description\": \"Triggers a recalculation of the route (e.g. user deviation). Linked to RestResource definitions.\",\n        \"operationId\": \"recalculateRoute\",\n        \"parameters\": [\n          {\n            \"name\": \"route_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Route recalculated\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/RouteCalculation\"\n                }\n              }\n            }\n          }\n        }\n      },\n      \"delete\": {\n        \"summary\": \"Cancel navigation / Delete route\",\n        \"description\": \"S-1: User cancels navigation. Removes the active route.\",\n        \"operationId\": \"deleteRoute\",\n        \"parameters\": [\n          {\n            \"name\": \"route_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"204\": {\n            \"description\": \"Route deleted/cancelled successfully\"\n          },\n          \"404\": {\n            \"description\": \"Route not found\"\n          }\n        }\n      }\n    },\n    \"/sync\": {\n      \"post\": {\n        \"summary\": \"Synchronize offline changes\",\n        \"description\": \"FR26. Synchronize user data when going online\",\n        \"operationId\": \"syncOfflineData\",\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"type\": \"array\",\n                \"items\": {\n                  \"discriminator\": {\n                    \"propertyName\": \"operation_type\"\n                  },\n                  \"oneOf\": [\n                    {\n                      \"$ref\": \"#/components/schemas/OfflineRating\"\n                    },\n                    {\n                      \"$ref\": \"#/components/schemas/OfflineFavorite\"\n                    }\n                  ]\n                }\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Synchronization successful\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/inline_response_200_3\"\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Invalid operations in payload\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/users/{user_id}/favourites\": {\n      \"post\": {\n        \"summary\": \"Add an exhibit to favourites\",\n        \"description\": \"FR18. The user must be able to add exhibits to their favourites.\",\n        \"operationId\": \"addExhibitToFavourites\",\n        \"parameters\": [\n          {\n            \"name\": \"user_id\",\n            \"in\": \"path\",\n            \"description\": \"Id of the user\",\n            \"required\": true,\n            \"style\": \"simple\",\n            \"explode\": false,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          }\n        ],\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/user_id_favourites_body\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"204\": {\n            \"description\": \"Exhibit added to favourites successfully\"\n          },\n          \"400\": {\n            \"description\": \"Invalid request data\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"User or exhibit not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"500\": {\n            \"description\": \"Internal server error\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/users/{user_id}/favourites/{exhibit_id}\": {\n      \"delete\": {\n        \"summary\": \"Remove exhibit from favourites\",\n        \"description\": \"Allows user to remove an exhibit from their list.\",\n        \"operationId\": \"removeExhibitFromFavourites\",\n        \"parameters\": [\n          {\n            \"name\": \"user_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          },\n          {\n            \"name\": \"exhibit_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"204\": {\n            \"description\": \"Exhibit removed from favourites successfully\"\n          },\n          \"404\": {\n            \"description\": \"User or exhibit not found in favourites\"\n          }\n        }\n      }\n    },\n    \"/users/{user_id}/preferences\": {\n      \"put\": {\n        \"summary\": \"Update user preferences\",\n        \"description\": \"FR21. The user must be able to update their preferences on the profile.\",\n        \"operationId\": \"updateUserPreferences\",\n        \"parameters\": [\n          {\n            \"name\": \"user_id\",\n            \"in\": \"path\",\n            \"description\": \"ID of the user whose preferences are being set or updated\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          }\n        ],\n        \"requestBody\": {\n          \"content\": {\n            \"application/json\": {\n              \"schema\": {\n                \"$ref\": \"#/components/schemas/UserPreferences\"\n              }\n            }\n          },\n          \"required\": true\n        },\n        \"responses\": {\n          \"204\": {\n            \"description\": \"Personalised profile was successfully\"\n          },\n          \"400\": {\n            \"description\": \"Invalid input\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"User not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    \"/users/{user_id}/routes\": {\n      \"get\": {\n        \"summary\": \"Get personalized route for a user\",\n        \"description\": \"FR22. The system must create personalized routes based on the user's provided preferences.\",\n        \"operationId\": \"getPersonalizedRoute\",\n        \"parameters\": [\n          {\n            \"name\": \"user_id\",\n            \"in\": \"path\",\n            \"required\": true,\n            \"schema\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          }\n        ],\n        \"responses\": {\n          \"200\": {\n            \"description\": \"Personalized route generated successfully\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/inline_response_200_2\"\n                }\n              }\n            }\n          },\n          \"400\": {\n            \"description\": \"Cannot generate route â€” missing user preferences\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          },\n          \"404\": {\n            \"description\": \"User not found\",\n            \"content\": {\n              \"application/json\": {\n                \"schema\": {\n                  \"$ref\": \"#/components/schemas/Error\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  \"components\": {\n    \"schemas\": {\n      \"MapWithOfflineStatus\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"map_id\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"example\": 1\n          },\n          \"title\": {\n            \"type\": \"string\",\n            \"example\": \"Museum Map\"\n          },\n          \"map_url\": {\n            \"type\": \"string\",\n            \"format\": \"uri\",\n            \"example\": \"/maps/1/downloaded_map.png\"\n          }\n        }\n      },\n      \"Error\": {\n        \"required\": [\n          \"code\",\n          \"message\"\n        ],\n        \"type\": \"object\",\n        \"properties\": {\n          \"code\": {\n            \"type\": \"integer\",\n            \"format\": \"int32\"\n          },\n          \"message\": {\n            \"type\": \"string\"\n          }\n        }\n      },\n      \"UserPreferences\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"interests\": {\n            \"type\": \"array\",\n            \"example\": [\n              \"modern art\",\n              \"ancient greece\"\n            ],\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        }\n      },\n      \"OfflineRating\": {\n        \"required\": [\n          \"exhibit_id\",\n          \"local_timestamp\",\n          \"operation_type\",\n          \"rating\"\n        ],\n        \"type\": \"object\",\n        \"properties\": {\n          \"operation_type\": {\n            \"type\": \"string\",\n            \"example\": \"rating\",\n            \"enum\": [\n              \"rating\"\n            ]\n          },\n          \"exhibit_id\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"example\": 456\n          },\n          \"rating\": {\n            \"type\": \"number\",\n            \"format\": \"float\",\n            \"example\": 4.5\n          },\n          \"local_timestamp\": {\n            \"type\": \"string\",\n            \"format\": \"date-time\"\n          }\n        }\n      },\n      \"OfflineFavorite\": {\n        \"required\": [\n          \"exhibit_id\",\n          \"local_timestamp\",\n          \"operation_type\"\n        ],\n        \"type\": \"object\",\n        \"properties\": {\n          \"operation_type\": {\n            \"type\": \"string\",\n            \"example\": \"add_favorite\",\n            \"enum\": [\n              \"add_favorite\",\n              \"remove_favorite\"\n            ]\n          },\n          \"exhibit_id\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"example\": 789\n          },\n          \"local_timestamp\": {\n            \"type\": \"string\",\n            \"format\": \"date-time\"\n          }\n        }\n      },\n      \"SyncConflict\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"operation\": {\n            \"type\": \"object\"\n          },\n          \"server_version\": {\n            \"type\": \"object\"\n          },\n          \"resolution\": {\n            \"type\": \"string\",\n            \"enum\": [\n              \"client_wins\",\n              \"server_wins\"\n            ]\n          }\n        }\n      },\n      \"Exhibit\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\n            \"type\": \"integer\"\n          },\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"category\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"historicalInfo\": {\n            \"type\": \"string\",\n            \"description\": \"Long text about historical background\"\n          },\n          \"visitingAvailability\": {\n            \"type\": \"boolean\"\n          },\n          \"description\": {\n            \"type\": \"string\",\n            \"description\": \"Long descriptive text\"\n          },\n          \"ratings\": {\n            \"type\": \"object\",\n            \"additionalProperties\": {\n              \"type\": \"integer\"\n            },\n            \"description\": \"Map of User ID to rating (1-5)\"\n          },\n          \"favouredBy\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"$ref\": \"#/components/schemas/User\"\n            }\n          },\n          \"wheelchairAccessible\": {\n            \"type\": \"boolean\"\n          },\n          \"brailleSupport\": {\n            \"type\": \"boolean\"\n          },\n          \"keywords\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        }\n      },\n      \"User\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"id\": {\n            \"type\": \"integer\"\n          },\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"ratings\": {\n            \"type\": \"object\",\n            \"additionalProperties\": {\n              \"type\": \"integer\"\n            },\n            \"description\": \"Map of Exhibit ID to rating (1-5)\"\n          },\n          \"favourites\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"$ref\": \"#/components/schemas/Exhibit\"\n            }\n          },\n          \"personalizationAvailable\": {\n            \"type\": \"boolean\"\n          },\n          \"preferences\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        }\n      },\n      \"inline_response_200\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"exhibit_id\": {\n            \"type\": \"number\",\n            \"description\": \"ID of the exhibit\",\n            \"format\": \"int64\",\n            \"example\": 0\n          },\n          \"title\": {\n            \"type\": \"string\",\n            \"example\": \"string\"\n          },\n          \"rating\": {\n            \"type\": \"number\",\n            \"description\": \"Average user rating out of 5\",\n            \"format\": \"float\",\n            \"example\": 0\n          },\n          \"location\": {\n            \"type\": \"string\",\n            \"description\": \"Physical location of the exhibit\",\n            \"example\": \"string\"\n          },\n          \"features\": {\n            \"type\": \"array\",\n            \"description\": \"Accessibility and visitor options\",\n            \"items\": {\n              \"type\": \"string\",\n              \"example\": \"Wheelchair Accessible\"\n            }\n          },\n          \"status\": {\n            \"type\": \"string\",\n            \"description\": \"Availability status of the exhibit\",\n            \"example\": \"open\",\n            \"enum\": [\n              \"open\",\n              \"closed\",\n              \"under_maintenance\"\n            ]\n          }\n        }\n      },\n      \"inline_response_200_1\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"exhibit_id\": {\n            \"type\": \"number\",\n            \"format\": \"int64\",\n            \"example\": 0\n          },\n          \"title\": {\n            \"type\": \"string\",\n            \"example\": \"string\"\n          }\n        }\n      },\n      \"exhibit_id_ratings_body\": {\n        \"required\": [\n          \"rating\"\n        ],\n        \"type\": \"object\",\n        \"properties\": {\n          \"rating\": {\n            \"type\": \"number\",\n            \"format\": \"float\",\n            \"example\": 4\n          }\n        }\n      },\n      \"user_id_favourites_body\": {\n        \"required\": [\n          \"exhibit_id\"\n        ],\n        \"type\": \"object\",\n        \"properties\": {\n          \"exhibit_id\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"example\": 1\n          }\n        }\n      },\n      \"inline_response_200_2\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"route_id\": {\n            \"type\": \"integer\",\n            \"format\": \"int64\",\n            \"example\": 123\n          },\n          \"exhibits\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"integer\",\n              \"format\": \"int64\"\n            }\n          },\n          \"estimated_duration\": {\n            \"type\": \"string\",\n            \"example\": \"45 minutes\"\n          },\n          \"map_url\": {\n            \"type\": \"string\",\n            \"format\": \"uri\",\n            \"example\": \"/maps/123/downloaded_map.png\"\n          },\n          \"starting_point\": {\n            \"type\": \"number\",\n            \"format\": \"float\"\n          },\n          \"ending_point\": {\n            \"type\": \"number\",\n            \"format\": \"float\"\n          }\n        }\n      },\n      \"inline_response_200_3\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"conflicts\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"$ref\": \"#/components/schemas/SyncConflict\"\n            }\n          }\n        }\n      },\n      \"Map\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"map_id\": {\n            \"type\": \"integer\"\n          },\n          \"mapData\": {\n            \"type\": \"string\"\n          },\n          \"zoom\": {\n            \"type\": \"number\"\n          },\n          \"rotation\": {\n            \"type\": \"number\"\n          }\n        },\n        \"required\": [\n          \"map_id\",\n          \"mapData\"\n        ]\n      },\n      \"MapUpload\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"mapData\": {\n            \"type\": \"string\"\n          },\n          \"format\": {\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"mapData\",\n          \"format\"\n        ]\n      },\n      \"Coordinate\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"user_id\": {\n            \"type\": \"integer\"\n          },\n          \"lat\": {\n            \"type\": \"number\"\n          },\n          \"lng\": {\n            \"type\": \"number\"\n          },\n          \"timestamp\": {\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"user_id\",\n          \"lat\",\n          \"lng\",\n          \"timestamp\"\n        ]\n      },\n      \"CoordinateUpdate\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"lat\": {\n            \"type\": \"number\"\n          },\n          \"lng\": {\n            \"type\": \"number\"\n          }\n        },\n        \"required\": [\n          \"lat\",\n          \"lng\"\n        ]\n      },\n      \"Destination\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"destination_id\": {\n            \"type\": \"integer\"\n          },\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"type\": {\n            \"type\": \"string\"\n          },\n          \"coordinates\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"lat\": {\n                \"type\": \"number\"\n              },\n              \"lng\": {\n                \"type\": \"number\"\n              }\n            },\n            \"required\": [\n              \"lat\",\n              \"lng\"\n            ]\n          }\n        },\n        \"required\": [\n          \"destination_id\",\n          \"name\",\n          \"type\",\n          \"coordinates\"\n        ]\n      },\n      \"DestinationUpload\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"map_id\": {\n            \"type\": \"integer\"\n          },\n          \"destinations\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"$ref\": \"#/components/schemas/Destination\"\n            }\n          }\n        },\n        \"required\": [\n          \"map_id\",\n          \"destinations\"\n        ]\n      },\n      \"DestinationResponse\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"destination_id\": {\n            \"type\": \"integer\"\n          },\n          \"name\": {\n            \"type\": \"string\"\n          },\n          \"type\": {\n            \"type\": \"string\"\n          },\n          \"coordinates\": {\n            \"type\": \"object\",\n            \"properties\": {\n              \"lat\": {\n                \"type\": \"number\"\n              },\n              \"lng\": {\n                \"type\": \"number\"\n              }\n            }\n          },\n          \"status\": {\n            \"type\": \"string\"\n          },\n          \"crowdLevel\": {\n            \"type\": \"string\"\n          },\n          \"lastUpdated\": {\n            \"type\": \"string\"\n          },\n          \"alternatives\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"suggestedTimes\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"required\": [\n          \"destination_id\"\n        ]\n      },\n      \"RouteRequest\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"user_id\": {\n            \"type\": \"integer\"\n          },\n          \"destination_id\": {\n            \"type\": \"integer\"\n          },\n          \"startLat\": {\n            \"type\": \"number\"\n          },\n          \"startLng\": {\n            \"type\": \"number\"\n          }\n        },\n        \"required\": [\n          \"user_id\",\n          \"destination_id\",\n          \"startLat\",\n          \"startLng\"\n        ]\n      },\n      \"RouteCalculation\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"route_id\": {\n            \"type\": \"integer\"\n          },\n          \"user_id\": {\n            \"type\": \"integer\"\n          },\n          \"destination_id\": {\n            \"type\": \"integer\"\n          },\n          \"calculationTime\": {\n            \"type\": \"integer\"\n          }\n        },\n        \"required\": [\n          \"route_id\",\n          \"user_id\",\n          \"destination_id\",\n          \"calculationTime\"\n        ]\n      },\n      \"RouteETA\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"route_id\": {\n            \"type\": \"integer\"\n          },\n          \"estimatedTime\": {\n            \"type\": \"integer\"\n          },\n          \"arrivalTime\": {\n            \"type\": \"string\"\n          },\n          \"distance\": {\n            \"type\": \"number\"\n          },\n          \"path\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"instructions\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        },\n        \"required\": [\n          \"route_id\",\n          \"estimatedTime\",\n          \"distance\"\n        ]\n      },\n      \"RouteUpdate\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"addStops\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          },\n          \"removeStops\": {\n            \"type\": \"array\",\n            \"items\": {\n              \"type\": \"string\"\n            }\n          }\n        }\n      },\n      \"NotificationRequest\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"user_id\": {\n            \"type\": \"integer\"\n          },\n          \"route_id\": {\n            \"type\": \"integer\"\n          },\n          \"currentLat\": {\n            \"type\": \"number\"\n          },\n          \"currentLng\": {\n            \"type\": \"number\"\n          }\n        },\n        \"required\": [\n          \"user_id\",\n          \"route_id\",\n          \"currentLat\",\n          \"currentLng\"\n        ]\n      },\n      \"Notification\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"notificationId\": {\n            \"type\": \"integer\"\n          },\n          \"type\": {\n            \"type\": \"string\"\n          },\n          \"message\": {\n            \"type\": \"string\"\n          }\n        },\n        \"required\": [\n          \"notificationId\",\n          \"type\",\n          \"message\"\n        ]\n      }\n    }\n  }\n}"